<section class="p-6 space-y-6">

  <!-- SECCIÓN 1: CREAR HORARIO   -->
  <section class="bg-white p-4 rounded shadow border border-gray-300">
    <button
      class="w-full text-left font-semibold text-lg py-2 px-4 rounded bg-gray-100 hover:bg-gray-200 transition"
      (click)="showCreate = !showCreate">
      Crear tarifa personalizada segun el horario
    </button>

    @if (showCreate) {
    <hr class="mt-5">
    <div class="mt-2 space-y-4 p-5">
      <div>
        <label class="font-semibold">Modo de creación *</label>
        <select class="w-full border border-gray-300 px-3 py-2 rounded"
                [(ngModel)]="createMode"
                name="createMode">
          <option value="add">Agregar</option>
          <option value="overwrite">Sobrescribir todo</option>
        </select>
      </div>
      <div>
        <label class="font-semibold">Hora inicial *</label>
        <input type="time"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="newSchedule.initHour"
               name="initHour"
               required>
      </div>
      <div>
        <label class="font-semibold">Hora final *</label>
        <input type="time"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="newSchedule.endHour"
               name="endHour"
               required>
      </div>
      <div>
        <label class="font-semibold">Precio *</label>
        <input type="number"
               min="0"
               step="0.01"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="newSchedule.price"
               name="price"
               required>
      </div>

      <button
        (click)="createSchedule()"
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
        Guardar horario
      </button>

    </div>
    }
  </section>

  <hr>

  <!-- SECCIÓN 2: LISTA DE HORARIOS -->
  <section class="space-y-4">

    <h2 class="text-xl font-semibold">Horarios especificos de la sucursal</h2>

    @if (schedules.length === 0) {
      <p class="text-gray-600">No hay horarios registrados.</p>
    } @else {

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        @for (s of schedules; track s.id) {
        <div class="border border-gray-300 rounded p-4 bg-white shadow">

          <p><span class="font-semibold">Inicio:</span> {{ s.initHour }}</p>
          <p><span class="font-semibold">Fin:</span> {{ s.endHour }}</p>
          <p><span class="font-semibold">Precio:</span> Q {{ s.price }}</p>

          <div class="mt-3 flex gap-2">
            <button
              class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700"
              (click)="openEditModal(s)">
              Modificar
            </button>

            <button
              class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700"
              (click)="deleteSchedule(s.id)">
              Eliminar
            </button>
          </div>

        </div>
        }
      </div>
    }
  </section>

</section>


<!-- MODAL PARA EDITAR HORARIO                -->
@if (showEditModal) {
<div class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50">
  <div class="bg-white w-11/12 max-w-md p-6 rounded shadow-lg border border-gray-300">

    <h2 class="text-xl font-semibold mb-4">Editar horario</h2>

    <div class="space-y-4">

      <div>
        <label class="font-semibold">Hora inicial *</label>
        <input type="time"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="editSchedule.initHour">
      </div>

      <div>
        <label class="font-semibold">Hora final *</label>
        <input type="time"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="editSchedule.endHour">
      </div>

      <div>
        <label class="font-semibold">Precio *</label>
        <input type="number"
               min="0"
               step="0.01"
               class="w-full border border-gray-300 px-3 py-2 rounded"
               [(ngModel)]="editSchedule.price">
      </div>

      <div class="flex justify-end gap-2 mt-4">
        <button class="px-3 py-2 bg-gray-400 text-white rounded"
                (click)="closeEditModal()">
          Cancelar
        </button>

        <button class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                (click)="updateSchedule()">
          Guardar cambios
        </button>
      </div>

    </div>

  </div>
</div>
}

